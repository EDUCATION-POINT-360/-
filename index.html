<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Education Point | Login & Register</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="shortcut icon" href="logo.png" type="image/png" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #0d47a1, #1976d2);
      color: #fff;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    .form-box {
      width: 100%;
      max-width: 500px;
      background: rgba(0, 0, 0, 0.8);
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 0 25px rgba(0,0,0,0.5);
      margin: 10px;
    }
    h2 {
      text-align: center;
      margin-bottom: 20px;
      font-size: 26px;
      color: #4fc3f7;
    }
    .field {
      position: relative;
      margin: 15px 0;
    }
    .field input, .field select {
      width: 100%;
      padding: 12px 40px 12px 40px;
      background: rgba(255,255,255,0.08);
      border: 1px solid #2196f3;
      color: white;
      border-radius: 8px;
      font-size: 15px;
    }
    .field i {
      position: absolute;
      left: 12px;
      top: 50%;
      transform: translateY(-50%);
      color: #03a9f4;
    }
    button {
      width: 100%;
      padding: 12px;
      background: #2196f3;
      border: none;
      border-radius: 8px;
      color: #fff;
      font-size: 16px;
      margin-top: 10px;
      cursor: pointer;
    }
    button:hover {
      background: #1976d2;
    }
    .toggle-link {
      color: #03a9f4;
      text-align: center;
      display: block;
      margin-top: 12px;
      cursor: pointer;
    }
    .error { color: red; text-align: center; font-size: 13px; }
    .hidden { display: none; }
    img.preview {
      width: 100px;
      height: 100px;
      object-fit: cover;
      border-radius: 50%;
      margin: 10px auto;
      display: block;
      border: 2px solid #03a9f4;
    }
    @media (max-width: 600px) {
      .form-box { padding: 20px; }
      h2 { font-size: 22px; }
    }
  </style>
</head>
<body>

  <!-- Login Form -->
  <div class="form-box" id="loginForm">
    <h2><i class="fas fa-sign-in-alt"></i> Login</h2>
    <div class="field"><i class="fas fa-user"></i>
      <input type="text" id="loginUsername" placeholder="Username" />
    </div>
    <div class="field"><i class="fas fa-lock"></i>
      <input type="password" id="loginPassword" placeholder="Password" />
    </div>
    <div id="loginError" class="error"></div>
    <button onclick="loginUser()">Login</button>
    <span class="toggle-link" onclick="toggleForms()">Don't have an account? Register</span>
    <span class="toggle-link" onclick="showForget()">Forgot Password?</span>
    <span class="toggle-link" onclick="accessAdmin()">Admin Panel</span>
  </div>

  <!-- Register Form -->
  <div class="form-box hidden" id="registerForm">
    <h2><i class="fas fa-user-plus"></i> Register</h2>
    <div class="field"><i class="fas fa-user"></i>
      <input type="text" id="regUsername" placeholder="Username" />
    </div>
    <div class="field"><i class="fas fa-envelope"></i>
      <input type="email" id="regEmail" placeholder="Email (required)" />
    </div>
    <div class="field"><i class="fas fa-lock"></i>
      <input type="password" id="regPassword" placeholder="Password" />
    </div>
    <div class="field"><i class="fas fa-graduation-cap"></i>
      <select id="regClass">
        <option value="">Select Class</option>
        <option>9th</option><option>10th</option><option>11th</option><option>12th</option>
      </select>
    </div>
    <div class="field"><i class="fas fa-calendar-alt"></i>
      <input type="date" id="regDOB" />
    </div>
    <div class="field"><i class="fas fa-city"></i>
      <select id="regCity">
        <option value="">Select City</option>
        <option>Karachi</option><option>Lahore</option><option>Islamabad</option><option>Rawalpindi</option>
        <option>Faisalabad</option><option>Multan</option><option>Quetta</option><option>Peshawar</option>
        <option>Hyderabad</option><option>Sialkot</option><option>Gujranwala</option><option>Sargodha</option>
        <option>Bahawalpur</option><option>Mianwali</option><option>Abbottabad</option><option>Sukkur</option>
        <option>Larkana</option><option>D.G. Khan</option><option>Mirpur</option><option>Okara</option>
        <option>Kasur</option><option>Others</option>
      </select>
    </div>
    <div class="field"><i class="fas fa-image"></i>
      <input type="file" id="regPic" accept="image/*" onchange="previewImage(event)" />
    </div>
    <img id="picPreview" class="preview hidden" />
    <div class="field"><i class="fas fa-venus-mars"></i>
      <select id="regGender">
        <option value="">Select Gender</option>
        <option>Male</option><option>Female</option><option>Other</option>
      </select>
    </div>
    <div id="registerError" class="error"></div>
    <button onclick="registerUser()">Register</button>
    <span class="toggle-link" onclick="toggleForms()">Already have an account? Login</span>
  </div>

  <!-- Profile Page -->
  <div class="form-box hidden" id="profilePage">
    <h2><i class="fas fa-user-circle"></i> Profile</h2>
    <img id="profilePic" class="preview" />
    <div id="profileDetails"></div>
    <button onclick="goHome()">Go to Home</button>
  </div>

  <!-- Admin Panel -->
  <div class="form-box hidden" id="adminPanel">
    <h2><i class="fas fa-user-shield"></i> Admin Panel</h2>
    <div id="userList" style="max-height: 300px; overflow-y: auto;"></div>
    <button onclick="goBack()">Logout</button>
  </div>

  <!-- Forget Password -->
  <div class="form-box hidden" id="forgetForm">
    <h2><i class="fas fa-key"></i> Recover Password</h2>
    <div class="field"><i class="fas fa-envelope"></i>
      <input type="email" id="forgetEmail" placeholder="Enter your email" />
    </div>
    <div id="forgetMsg" class="error"></div>
    <button onclick="recoverPassword()">Recover</button>
    <span class="toggle-link" onclick="goBack()">Back to Login</span>
  </div>

<script>
const adminPassword = "admin123";

function toggleForms() {
  document.getElementById("loginForm").classList.toggle("hidden");
  document.getElementById("registerForm").classList.toggle("hidden");
  clearErrors();
}

function registerUser() {
  const username = document.getElementById("regUsername").value.trim();
  const email = document.getElementById("regEmail").value.trim();
  const password = document.getElementById("regPassword").value.trim();
  const regClass = document.getElementById("regClass").value;
  const dob = document.getElementById("regDOB").value;
  const city = document.getElementById("regCity").value;
  const gender = document.getElementById("regGender").value;
  const pic = document.getElementById("regPic").files[0];

  if (!username || !email || !password || !regClass || !dob || !city || !gender) {
    showError("registerError", "Please fill all required fields.");
    return;
  }

  const reader = new FileReader();
  reader.onload = () => {
    const user = { username, email, password, regClass, dob, city, gender, picData: reader.result };
    let users = JSON.parse(localStorage.getItem("users") || "[]");
    users.push(user);
    localStorage.setItem("users", JSON.stringify(users));
    toggleForms();
  };

  if (pic) {
    reader.readAsDataURL(pic);
  } else {
    reader.onload();
  }
}

function loginUser() {
  const username = document.getElementById("loginUsername").value.trim();
  const password = document.getElementById("loginPassword").value.trim();
  const users = JSON.parse(localStorage.getItem("users") || "[]");
  const user = users.find(u => u.username === username && u.password === password);

  if (user) {
    showProfile(user);
  } else {
    showError("loginError", "Invalid credentials.");
  }
}

function showProfile(user) {
  hideAll();
  document.getElementById("profilePage").classList.remove("hidden");
  document.getElementById("profileDetails").innerHTML = `
    <p><strong>Username:</strong> ${user.username}</p>
    <p><strong>Email:</strong> ${user.email}</p>
    <p><strong>Class:</strong> ${user.regClass}</p>
    <p><strong>DOB:</strong> ${user.dob}</p>
    <p><strong>City:</strong> ${user.city}</p>
    <p><strong>Gender:</strong> ${user.gender}</p>
  `;
  document.getElementById("profilePic").src = user.picData || "https://via.placeholder.com/100";
}

function accessAdmin() {
  const entered = prompt("Enter Admin Password:");
  if (entered === adminPassword) showAdminPanel();
  else alert("Incorrect admin password!");
}

function showAdminPanel() {
  hideAll();
  document.getElementById("adminPanel").classList.remove("hidden");
  const users = JSON.parse(localStorage.getItem("users") || "[]");
  const list = document.getElementById("userList");
  list.innerHTML = users.length === 0 ? "<p>No users registered.</p>" : users.map((u, i) => `
    <div style="margin-bottom: 10px; border-bottom: 1px solid #4fc3f7; padding-bottom: 8px;">
      <strong>${i + 1}. ${u.username}</strong><br/>
      <span>Email: ${u.email}</span><br/>
      <span>Class: ${u.regClass}, City: ${u.city}, Gender: ${u.gender}</span>
    </div>
  `).join('');
}

function recoverPassword() {
  const email = document.getElementById("forgetEmail").value.trim();
  const users = JSON.parse(localStorage.getItem("users") || "[]");
  const user = users.find(u => u.email === email);
  document.getElementById("forgetMsg").innerHTML = user
    ? `Your password is: <strong>${user.password}</strong>`
    : "Email not found.";
}

function previewImage(event) {
  const reader = new FileReader();
  reader.onload = () => {
    document.getElementById("picPreview").src = reader.result;
    document.getElementById("picPreview").classList.remove("hidden");
  };
  reader.readAsDataURL(event.target.files[0]);
}

function goBack() {
  hideAll();
  document.getElementById("loginForm").classList.remove("hidden");
  clearErrors();
}

function goHome() {
  alert("Redirecting to Home Page...");
  window.location.href = "home.html";
}

function hideAll() {
  document.querySelectorAll(".form-box").forEach(box => box.classList.add("hidden"));
}

function showError(id, msg) {
  document.getElementById(id).innerText = msg;
}

function clearErrors() {
  document.querySelectorAll(".error").forEach(e => e.innerHTML = "");
}
</script>
</body>
</html>